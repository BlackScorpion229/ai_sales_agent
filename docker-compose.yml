version: '3.8'

services:
  # Main Application (Frontend + Backend)
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ai-sales-app
    ports:
      - "8000:8000"  # Backend API
      - "3000:3000"  # Frontend dev server
    env_file:
      - ./backend/.env
    restart: unless-stopped



# You're absolutely right! Since you're using cloud-hosted PostgreSQL and Redis, you don't need those services in your docker-compose.yml. Let me simplify it:


# ## Simplified docker-compose.yml Explanation:

# **Now your file only has 11 lines vs 68 lines!**

# ### **What's left:**
# ```yaml
# version: '3.8'
# services:
#   app:
#     build: context: .
#     ports: "8000:8000", "3000:3000"
#     env_file: ./backend/.env
#     restart: unless-stopped
# ```

# ### **Why you still need this simplified version:**

# 1. **Build orchestration** - Tells Docker how to build your application
# 2. **Port mapping** - Maps container ports to your local machine
# 3. **Environment loading** - Automatically loads your `.env` file
# 4. **Restart policy** - Automatically restarts container if it crashes
# 5. **Single command deployment** - `docker-compose up` instead of multiple Docker commands

# ### **Benefits of the simplified approach:**
# - ✅ **Cloud services** - Uses your external PostgreSQL and Redis
# - ✅ **Minimal configuration** - Only what you actually need
# - ✅ **Easy management** - Single command to start/stop everything
# - ✅ **Environment variables** - All configs loaded from your `.env` file
# - ✅ **Automatic restart** - Container restarts if it fails

# ### **Your .env file should contain:**
# ```
# DATABASE_URL=your-cloud-postgres-url
# REDIS_URL=your-cloud-redis-url
# AZURE_OPENAI_DEPLOYMENT=your-deployment
# RESEND_API_KEY=your-api-key
# # ... other environment variables
# ```

# **You still need docker-compose.yml** because it's the simplest way to:
# - Build your Docker image
# - Map the correct ports
# - Load environment variables
# - Manage container lifecycle

# **To run your application:**
# ```bash
# docker-compose up -d
# ```

# This is now the minimal setup you need for your cloud-based architecture!